(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{126:function(e,t,a){e.exports=a(146)},131:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o),l=(a(131),a(33)),c=a(34),s=a(36),d=a(37),u=a(10),p=a.n(u),m=a(13),h=a(38),g=a(8),f=(a(72),a(171)),v=a(174),b=a(180),E=a(194),C=a(176),y=a(181),O=a(191),w=a(196),S=a(185),P=a(184),k=a(182),x=a(183),A=a(179),j=a(193),T=a(190),D=a(188),I=a(189),F=a(187),N=a(147),_=a(186),V=a(80),M=a(29);if(!M.a.apps.length)try{M.a.initializeApp({apiKey:"AIzaSyAV1RFAEI358lpXv_7d81xb0KdRo4f-TEk",authDomain:"tienda-aa5d3.firebaseapp.com",databaseURL:"https://tienda-aa5d3.firebaseio.com",projectId:"tienda-aa5d3",storageBucket:"tienda-aa5d3.appspot.com",messagingSenderId:"898170837567",appId:"1:898170837567:web:346072753502ad054cf68a",measurementId:"G-WX90RTSG4S"})}catch(ge){console.log(ge)}var R=M.a.database(),L=(Object(f.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"}}})),function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._onChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(h.a)({},a,r))},n._onChangeNombre=function(e){var t=e.target,a=t.name,r=t.value,o=[];n.setState(Object(h.a)({},a,r),(function(){var e=n.state.inputNombre;n.state.inventario.map((function(t){t.nombre.toLowerCase().search(e.toLowerCase())>=0&&o.push(t)})),n.setState({tablaInventario:o})}))},n.handleClose=function(e){n.setState({show:!1,inputSell:""})},n.handleCancel=function(e){n.setState({edit:!0,activeSearch:!1,codigo:"",nombreProducto:"",descripcion:"",cantidadDisponible:"",precioUnidad:"",cantidadAgregar:"",inputSell:"",editCantidad:!0,errorProducto:!1,helperProducto:"",errorCantidad:!1,helperCantidad:"",errorPrecio:!1,helperPrecio:""})},n.handleNuevo=function(e){n.setState({edit:!1,activeSearch:!0,codigo:n.state.inputSell,show:!1,editCantidad:!1,nuevo:!0})},n.imprimir=function(){var e=n.state.inventario;Object(V.a)({data:e,fileName:"Reporte",exportType:"xls"})},n.state={productos:[],inventario:[],tablaInventario:[],inputSell:"",codigo:"",nombreProducto:"",descripcion:"",cantidadDisponible:0,cantidadAgregar:0,precioUnidad:"",activeSearch:!1,edit:!0,show:!1,seleccionado:"",productoEditar:null,rev:"",editCantidad:!0,editAgregar:!0,nuevo:!1,helperCantidad:"",helperDescripcion:"",helperPrecio:"",helperProducto:"",helperTipo:"",errorCantidad:!1,errorDescripcion:!1,errorPrecio:!1,errorProducto:!1,errorTipo:!1,tipoProducto:"Nada",inputNombre:""},n._onKeyPress=n._onKeyPress.bind(Object(g.a)(n)),n._onChange=n._onChange.bind(Object(g.a)(n)),n._onChangeNombre=n._onChangeNombre.bind(Object(g.a)(n)),n.handleClose=n.handleClose.bind(Object(g.a)(n)),n.handleModifica=n.handleModifica.bind(Object(g.a)(n)),n.handleShow=n.handleShow.bind(Object(g.a)(n)),n.handleCancel=n.handleCancel.bind(Object(g.a)(n)),n.handleNuevo=n.handleNuevo.bind(Object(g.a)(n)),n.handleGuardarCambios=n.handleGuardarCambios.bind(Object(g.a)(n)),n.handleClickTable=n.handleClickTable.bind(Object(g.a)(n)),n.buscar=n.buscar.bind(Object(g.a)(n)),n.putProducto=n.putProducto.bind(Object(g.a)(n)),n.imprimir=n.imprimir.bind(Object(g.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;R.ref().child("INVENTARIO").on("value",(function(t){if(null==t.val())e.setState({inventario:[],tablaInventario:[]});else{var a=t.val(),n=Object.values(a);e.setState({inventario:n,tablaInventario:n})}}))}},{key:"_onKeyPress",value:function(e){var t=this;13===e.charCode&&this.buscar(this.state.inputSell).then((function(e){"NO"==e.mensaje?(t.setState({show:!0}),console.log("NO EXISTE EL PRODUCTO")):(console.log(e.producto),console.log("SI EXISTE EL PRODUCTO"),t.handleModifica(e.producto))}))}},{key:"handleClickTable",value:function(e){var t=this;this.setState({codigo:"",nombreProducto:"",descripcion:"",cantidadDisponible:"",precioUnidad:"",cantidadAgregar:"",inputSell:""}),this.buscar(e.target.id).then((function(e){"NO"==e.mensaje?(t.setState({show:!0}),console.log("NO EXISTE EL PRODUCTO")):(console.log(e.producto),console.log("SI EXISTE EL PRODUCTO"),t.handleModifica(e.producto))}))}},{key:"handleModifica",value:function(e){this.setState({inputSell:"",edit:!1,editAgregar:!1,activeSearch:!0,codigo:e.id,nombreProducto:e.nombre,descripcion:e.descripcion,cantidadDisponible:e.cantidad,precioUnidad:e.precio,rev:e._rev,tipoProducto:e.tipoProducto})}},{key:"handleGuardarCambios",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n,r=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({errorProducto:!1,helperProducto:"",errorCantidad:!1,helperCantidad:"",errorPrecio:!1,helperPrecio:"",inputSell:"",inputNombre:""}),""!=this.state.nombreProducto&&(""!=this.state.cantidadDisponible||0==this.state.cantidadDisponible)&&""!=this.state.precioUnidad&&"Nada"!=this.state.tipoProducto){e.next=9;break}""==this.state.nombreProducto&&this.setState({errorProducto:!0,helperProducto:"Campo Requerido"}),""==this.state.cantidadDisponible&&0!=this.state.cantidadDisponible&&this.setState({errorCantidad:!0,helperCantidad:"Campo Requerido"}),""==this.state.precioUnidad&&this.setState({errorPrecio:!0,helperPrecio:"Campo Requerido"}),"Nada"==this.state.tipoProducto&&this.setState({errorTipo:!0,helperTipo:"Campo Requerido"}),console.log("FALTA INFORMACION"),e.next=20;break;case 9:if(0!=this.state.nuevo){e.next=17;break}return t=0,t=null==this.state.cantidadAgregar||""==this.state.cantidadAgregar?0:this.state.cantidadAgregar,a={id:this.state.codigo,nombre:this.state.nombreProducto,descripcion:this.state.descripcion,cantidad:parseInt(t)+parseInt(this.state.cantidadDisponible),precio:this.state.precioUnidad,tipoProducto:this.state.tipoProducto},e.next=15,this.putProducto(a).then((function(e){r.setState({edit:!0,activeSearch:!1,codigo:"",nombreProducto:"",descripcion:"",cantidadDisponible:"",precioUnidad:"",cantidadAgregar:"",nuevo:!1,editCantidad:!0,editAgregar:!0})}));case 15:e.next=20;break;case 17:return n={id:this.state.inputSell,nombre:this.state.nombreProducto,descripcion:this.state.descripcion,cantidad:this.state.cantidadDisponible,precio:this.state.precioUnidad,tipoProducto:this.state.tipoProducto},e.next=20,this.putProducto(n).then((function(e){r.setState({edit:!0,activeSearch:!1,codigo:"",nombreProducto:"",descripcion:"",cantidadDisponible:"",precioUnidad:"",cantidadAgregar:"",nuevo:!1,editCantidad:!0,editAgregar:!0})}));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"putProducto",value:function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.ref().child("INVENTARIO").child(t.id).set(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"buscar",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={mensaje:"NO",producto:{}},this.state.inventario.map((function(e){if(e.id==t){a.mensaje="SI",a.producto=e}})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{container:!0,style:{backgroundColor:"#dddddd"}},r.a.createElement(v.a,{item:!0,xs:1,style:{backgroundColor:"#dddddd"}}),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(v.a,{style:{backgroundColor:"#dddddd",height:"100%"}},r.a.createElement(C.a,{fullWidth:!0,noValidate:!0,autoComplete:"off"},r.a.createElement(E.a,{disabled:this.state.activeSearch,name:"inputSell",onChange:this._onChange,onKeyPress:this._onKeyPress,id:"outlined-basic",variant:"outlined",value:this.state.inputSell,style:{width:"100%",marginTop:"50px"},label:"Buscar por Codigo (LECTOR DE BARRAS)",size:"small"}),r.a.createElement(E.a,{disabled:this.state.activeSearch,name:"inputNombre",onChange:this._onChangeNombre,id:"outlined-basic",variant:"outlined",value:this.state.inputNombre,style:{width:"100%",marginTop:"7px"},label:"Buscar por Nombre (TECLADO)",size:"small"}),r.a.createElement(b.a,null,r.a.createElement(A.a,{style:{overflow:"auto",height:"55vh",marginTop:"5px"}},r.a.createElement("div",null,r.a.createElement(y.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(k.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{align:"center"},"ID"),r.a.createElement(P.a,{align:"center"},"Nombre"),r.a.createElement(P.a,{align:"center"},"Cantidad Disponible"),r.a.createElement(P.a,{align:"center"},"Tipo"),r.a.createElement(P.a,{align:"center"},"Precio Unidad"))),r.a.createElement(S.a,null,this.state.tablaInventario.map((function(t,a,n){return r.a.createElement(x.a,{hover:!0,id:t.id,onClick:e.handleClickTable,key:a},r.a.createElement(P.a,{id:t.id,align:"center"},t.id),r.a.createElement(P.a,{id:t.id,align:"center"},t.nombre),r.a.createElement(P.a,{id:t.id,align:"center"},t.cantidad),r.a.createElement(P.a,{id:t.id,align:"center"},t.tipoProducto),r.a.createElement(P.a,{id:t.id,align:"center"},t.precio))})))))))),r.a.createElement(_.a,{fullWidth:!0,color:"primary","aria-label":"full width outlined button group"},r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(t){return e.imprimir()}},"Exportar Excel")))),r.a.createElement(v.a,{item:!0,xs:1,style:{backgroundColor:"#dddddd",height:"100vh"}}),r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(E.a,{disabled:!0,label:"Codigo",name:"codigo",onChange:this._onChange,variant:"outlined",value:this.state.codigo,style:{width:"90%",marginTop:"50px"}}),r.a.createElement(E.a,{error:this.state.errorProducto,helperText:this.state.helperProducto,disabled:this.state.edit,label:"Nombre Producto",name:"nombreProducto",onChange:this._onChange,variant:"outlined",value:this.state.nombreProducto,style:{width:"40%",marginTop:"50px"}}),r.a.createElement(C.a,{variant:"filled"},r.a.createElement(O.a,{error:this.state.errorTipo,helperText:this.state.helperTipo,labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",name:"tipoProducto",label:"Tipo Producto",value:this.state.tipoProducto,onChange:this._onChange,style:{width:"100%",marginTop:"50px"},disabled:this.state.edit},"   ",r.a.createElement(w.a,{disabled:!0,value:"Nada"},r.a.createElement("em",null,"Tipo de Producto")),r.a.createElement(w.a,{value:"Medicamento"},"Medicamento"),r.a.createElement(w.a,{value:"Procedimiento"},"Procedimiento"),r.a.createElement(w.a,{value:"Consulta"},"Consulta"))),r.a.createElement(E.a,{error:this.state.errorDescripcion,helperText:this.state.helperDescripcion,disabled:this.state.edit,label:"Descripci\xf3n",name:"descripcion",onChange:this._onChange,variant:"outlined",value:this.state.descripcion,style:{width:"90%",marginTop:"50px"}}),r.a.createElement(E.a,{error:this.state.errorCantidad,helperText:this.state.helperCantidad,disabled:this.state.editCantidad,type:"number",label:"Disponible",name:"cantidadDisponible",onChange:this._onChange,variant:"outlined",value:this.state.cantidadDisponible,style:{width:"40%",marginTop:"50px"}}),r.a.createElement(E.a,{disabled:this.state.editAgregar,type:"number",label:"Agregar",name:"cantidadAgregar",onChange:this._onChange,variant:"outlined",value:this.state.cantidadAgregar,style:{width:"40%",marginTop:"50px"}}),r.a.createElement(E.a,{error:this.state.errorPrecio,helperText:this.state.helperPrecio,disabled:this.state.edit,type:"number",label:"Precio Unidad",name:"precioUnidad",onChange:this._onChange,variant:"outlined",value:this.state.precioUnidad,style:{width:"90%",marginTop:"50px"}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{disabled:this.state.edit,variant:"outlined",color:"primary",onClick:this.handleGuardarCambios},"Guardar"),r.a.createElement(N.a,{disabled:this.state.edit,variant:"outlined",color:"secondary",onClick:this.handleCancel},"Cancelar")),r.a.createElement(j.a,{open:this.state.show,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(F.a,{id:"alert-dialog-title"},"No se encuentra Producto en el Inventario"),r.a.createElement(D.a,null,r.a.createElement(I.a,{id:"alert-dialog-description"},"\xbfDesea agregar el producto?")),r.a.createElement(T.a,null,r.a.createElement(N.a,{onClick:this.handleNuevo,color:"primary"},"Si"),r.a.createElement(N.a,{onClick:this.handleClose,color:"primary",autoFocus:!0},"No"))))}}]),a}(r.a.Component)),z=a(116),U=a(195);if(!M.a.apps.length)try{M.a.initializeApp({apiKey:"AIzaSyAV1RFAEI358lpXv_7d81xb0KdRo4f-TEk",authDomain:"tienda-aa5d3.firebaseapp.com",databaseURL:"https://tienda-aa5d3.firebaseio.com",projectId:"tienda-aa5d3",storageBucket:"tienda-aa5d3.appspot.com",messagingSenderId:"898170837567",appId:"1:898170837567:web:346072753502ad054cf68a",measurementId:"G-WX90RTSG4S"})}catch(ge){console.log(ge)}var G=M.a.database(),W=r.a.createRef(),K=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),B=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._onChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(h.a)({},a,r))},n.handleProcesar=function(){if(0==n.state.filtrado)alert("SELECCIONE TIPO DE REPORTE");else if(1==n.state.filtrado)if(0==n.state.anioFiltro)alert("SELECCIONE A\xd1O PARA PROCESAR INFORMACION");else{var e=0,t=0,a=n.state.ventas,r=[],o=n.state.anioFiltro,i=[];a.map((function(e){var t=e._id;parseInt(t.substring(0,4))==o&&"un"!=t.substring(8,10)&&r.push(e)})),r.map((function(t){t.venta.map((function(t){e+=parseFloat(t.total)}))})),r.map((function(e){var a=e.anio,n=e.mes,r=e.dia;e.venta.map((function(e){t+=e.prod.length,e.prod.map((function(e){var t={anio:a,mes:n,dia:r,nombre:e.producto,monto:e.precio,tipo:e.tipoProducto};i.push(t)}))}))})),n.setState({montoVenta:e,cantidadVenta:t,tablaMostrar:i,tablaFiltrar:i})}else if(2===n.state.filtrado)if(0==n.state.anioFiltro||""==n.state.mesFiltro)alert("SELECCIONE A\xd1O Y MES PARA PROCESAR INFORMACION");else{var l=0,c=0,s=n.state.ventas,d=[],u=n.state.anioFiltro,p=n.state.mesFiltro,m=[];s.map((function(e){var t=e._id;parseInt(t.substring(0,4))==u&&t.substring(5,7)==p&&"un"!=t.substring(8,10)&&d.push(e)})),d.map((function(e){e.venta.map((function(e){l+=parseFloat(e.total)}))})),d.map((function(e){var t=e.anio,a=e.mes,n=e.dia;e.venta.map((function(e){c+=e.prod.length,e.prod.map((function(e){var r={anio:t,mes:a,dia:n,nombre:e.producto,monto:e.precio,tipo:e.tipoProducto};m.push(r)}))}))})),n.setState({montoVenta:l,cantidadVenta:c,tablaMostrar:m,tablaFiltrar:m})}else if(3==n.state.filtrado)if(0==n.state.anioFiltro||""==n.state.mesFiltro||""==n.state.diaFiltro)alert("SELECCIONE A\xd1O, MES Y DIA PARA PROCESAR INFORMACION");else{var h=0,g=0,f=n.state.ventas,v=[],b=n.state.anioFiltro,E=n.state.mesFiltro,C=n.state.diaFiltro,y=[];f.map((function(e){var t=e._id;parseInt(t.substring(0,4))==b&&t.substring(5,7)==E&&t.substring(8,10)==C&&v.push(e)})),v.map((function(e){e.venta.map((function(e){h+=parseFloat(e.total)}))})),v.map((function(e){var t=e.anio,a=e.mes,n=e.dia;e.venta.map((function(e){g+=e.prod.length,e.prod.map((function(e){var r={anio:t,mes:a,dia:n,nombre:e.producto,monto:e.precio,tipo:e.tipoProducto};y.push(r)}))}))})),n.setState({montoVenta:h,cantidadVenta:g,tablaMostrar:y,tablaFiltrar:y})}},n.todo=function(){var e=n.state.tablaFiltrar,t=0;e.map((function(e){t=parseFloat(e.monto)+t})),n.setState({tablaMostrar:n.state.tablaFiltrar,montoVenta:t,cantidadVenta:e.length})},n.procedimiento=function(){var e=[],t=n.state.tablaFiltrar,a=0;t.map((function(t){"Procedimiento"===t.tipo&&(e.push(t),a=parseFloat(t.monto)+a)})),n.setState({tablaMostrar:e,montoVenta:a,cantidadVenta:e.length})},n.consulta=function(){var e=[],t=n.state.tablaFiltrar,a=0;t.map((function(t){"Consulta"===t.tipo&&(e.push(t),a=parseFloat(t.monto)+a)})),n.setState({tablaMostrar:e,montoVenta:a,cantidadVenta:e.length})},n.medicamento=function(){var e=[],t=n.state.tablaFiltrar,a=0;t.map((function(t){"Medicamento"===t.tipo&&(e.push(t),a=parseFloat(t.monto)+a)})),n.setState({tablaMostrar:e,montoVenta:a,cantidadVenta:e.length})},n.imprimir=function(){var e=n.state.tablaMostrar;Object(V.a)({data:e,fileName:"Reporte",exportType:"xls"})},n.handleAnio=function(){n.setState({disAnio:!1,disMes:!0,disDia:!0,diaFiltro:"",mesFiltro:"",filtrado:1})},n.handleMes=function(){n.setState({disAnio:!1,disMes:!1,disDia:!0,diaFiltro:"",filtrado:2})},n.handleDia=function(){n.setState({disAnio:!1,disMes:!1,disDia:!1,filtrado:3})},n.state={anioFiltro:0,mesFiltro:"",diaFiltro:"",disAnio:!0,disMes:!0,disDia:!0,filtrado:0,ventas:[],montoVenta:0,cantidadVenta:0,tablaMostrar:[],tablaFiltrar:[],hoy:!1},n._onChange=n._onChange.bind(Object(g.a)(n)),n.handleAnio=n.handleAnio.bind(Object(g.a)(n)),n.handleMes=n.handleMes.bind(Object(g.a)(n)),n.handleDia=n.handleDia.bind(Object(g.a)(n)),n.handleProcesar=n.handleProcesar.bind(Object(g.a)(n)),n.getAllVentas=n.getAllVentas.bind(Object(g.a)(n)),n.imprimir=n.imprimir.bind(Object(g.a)(n)),n.todo=n.todo.bind(Object(g.a)(n)),n.procedimiento=n.procedimiento.bind(Object(g.a)(n)),n.consulta=n.consulta.bind(Object(g.a)(n)),n.medicamento=n.medicamento.bind(Object(g.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getAllVentas()}},{key:"getAllVentas",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G.ref().child("VENTAS").on("value",(function(e){var a=e.val(),n=Object.values(a);t.setState({ventas:n})})),console.log("ESTAS VENTAS SIII"),e.abrupt("return",0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return e=this.state.hoy?"OK":r.a.createElement("div",null,r.a.createElement(y.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(k.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{align:"center"},"Fecha"),r.a.createElement(P.a,{align:"center"},"Nombre"),r.a.createElement(P.a,{align:"center"},"Tipo"),r.a.createElement(P.a,{align:"center"},"Monto"))),r.a.createElement(S.a,null,this.state.tablaMostrar.map((function(e,t,a){return r.a.createElement(x.a,{key:t},r.a.createElement(P.a,{width:"25%",align:"center"},e.dia,"/",e.mes,"/",e.anio),r.a.createElement(P.a,{width:"25%",align:"center"},e.nombre),r.a.createElement(P.a,{width:"25%",align:"center"},e.tipo),r.a.createElement(P.a,{width:"25%",align:"center"},"$",parseFloat(e.monto).toFixed(2)))}))))),r.a.createElement(v.a,{container:!0,style:{backgroundColor:"#dddddd"}},r.a.createElement(v.a,{item:!0,xs:1,style:{backgroundColor:"#dddddd"}}),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(v.a,{style:{backgroundColor:"#dddddd",height:"100%"}},r.a.createElement(C.a,{fullWidth:!0,noValidate:!0,autoComplete:"off"},r.a.createElement(b.a,null,r.a.createElement(_.a,{fullWidth:!0,color:"primary","aria-label":"full width outlined button group"},r.a.createElement(N.a,{variant:"contained",color:"secondary",onClick:function(e){return t.todo()}},"TODO"),r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(e){return t.medicamento()}},"Medicamento"),r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(e){return t.procedimiento()}},"Procedimiento"),r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(e){return t.consulta()}},"Consulta")),r.a.createElement(A.a,{style:{overflow:"auto",height:"70vh",marginTop:"30px"}},r.a.createElement("div",{ref:W},e)))))),r.a.createElement(v.a,{item:!0,xs:1,style:{backgroundColor:"#dddddd",height:"100vh"}}),r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(v.a,{style:{display:"flex",justifyContent:"flex-start",flexDirection:"column",textAlign:"center",backgroundColor:"#bbbbbb",height:"100%"}},r.a.createElement(v.a,{style:{left:"30%",height:"50%",backgroundColor:"#ffffff"}},r.a.createElement(v.a,Object(h.a)({container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},"style",{left:"50%",height:"100%",backgroundColor:"#cccccc"}),r.a.createElement(z.a,{variant:"h4"}," TOTAL Vendido"),r.a.createElement(z.a,{variant:"h4"},K.format(this.state.montoVenta)),r.a.createElement(z.a,{variant:"h4"}," Total Productos"),r.a.createElement(z.a,{variant:"h4"},this.state.cantidadVenta))),r.a.createElement(v.a,{style:{display:"flex",justifyContent:"flex-start",flexDirection:"column",textAlign:"center",left:"50%",height:"50%",backgroundColor:"#ffffff"}},r.a.createElement(z.a,{variant:"h4"},"Configuracion de Reporte"),r.a.createElement(_.a,{fullWidth:!0,color:"primary","aria-label":"full width outlined button group"},r.a.createElement(N.a,{variant:"contained",color:"secondary",onClick:function(e){return t.handleAnio()}},"Anual"),r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(e){return t.handleMes()}},"Mensual"),r.a.createElement(N.a,{variant:"contained",color:"secondary",onClick:function(e){return t.handleDia()}},"Diario")),r.a.createElement(C.a,{disabled:this.state.disAnio,variant:"filled"},r.a.createElement(U.a,{htmlFor:"filled-age-native-simple"},"A\xf1o"),r.a.createElement(O.a,{native:!0,value:this.state.anioFiltro,onChange:this._onChange,inputProps:{name:"anioFiltro",id:"filled-age-native-simple"}},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:2020},"2020"),r.a.createElement("option",{value:2021},"2021"),r.a.createElement("option",{value:2022},"2022"),r.a.createElement("option",{value:2023},"2023"),r.a.createElement("option",{value:2024},"2024"),r.a.createElement("option",{value:2025},"2025"),r.a.createElement("option",{value:2026},"2026"),r.a.createElement("option",{value:2027},"2027"),r.a.createElement("option",{value:2028},"2028"),r.a.createElement("option",{value:2029},"2028"),r.a.createElement("option",{value:2030},"2028"),r.a.createElement("option",{value:2031},"2028"))),r.a.createElement(C.a,{id:"imprimir",disabled:this.state.disMes,variant:"filled"},r.a.createElement(U.a,{htmlFor:"filled-age-native-simple"},"Mes"),r.a.createElement(O.a,{native:!0,value:this.state.mesFiltro,onChange:this._onChange,inputProps:{name:"mesFiltro",id:"filled-age-native-simple"}},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"01"},"Enero"),r.a.createElement("option",{value:"02"},"Febrero"),r.a.createElement("option",{value:"03"},"Marzo"),r.a.createElement("option",{value:"04"},"Abril"),r.a.createElement("option",{value:"05"},"Mayo"),r.a.createElement("option",{value:"06"},"Junio"),r.a.createElement("option",{value:"07"},"Julio"),r.a.createElement("option",{value:"08"},"Agosto"),r.a.createElement("option",{value:"09"},"Septiembre"),r.a.createElement("option",{value:"10"},"Octubre"),r.a.createElement("option",{value:"11"},"Noviembre"),r.a.createElement("option",{value:"12"},"Diciembre"))),r.a.createElement(C.a,{disabled:this.state.disDia,variant:"filled"},r.a.createElement(U.a,{htmlFor:"filled-age-native-simple"},"Dia"),r.a.createElement(O.a,{native:!0,value:this.state.diaFiltro,onChange:this._onChange,inputProps:{name:"diaFiltro",id:"filled-age-native-simple"}},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"01"},"01"),r.a.createElement("option",{value:"02"},"02"),r.a.createElement("option",{value:"03"},"03"),r.a.createElement("option",{value:"04"},"04"),r.a.createElement("option",{value:"05"},"05"),r.a.createElement("option",{value:"06"},"06"),r.a.createElement("option",{value:"07"},"07"),r.a.createElement("option",{value:"08"},"08"),r.a.createElement("option",{value:"09"},"09"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"11"},"11"),r.a.createElement("option",{value:"12"},"12"),r.a.createElement("option",{value:"13"},"13"),r.a.createElement("option",{value:"14"},"14"),r.a.createElement("option",{value:"15"},"15"),r.a.createElement("option",{value:"16"},"16"),r.a.createElement("option",{value:"17"},"17"),r.a.createElement("option",{value:"18"},"18"),r.a.createElement("option",{value:"19"},"19"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"21"},"21"),r.a.createElement("option",{value:"22"},"22"),r.a.createElement("option",{value:"23"},"23"),r.a.createElement("option",{value:"24"},"24"),r.a.createElement("option",{value:"25"},"25"),r.a.createElement("option",{value:"26"},"26"),r.a.createElement("option",{value:"27"},"27"),r.a.createElement("option",{value:"28"},"28"),r.a.createElement("option",{value:"29"},"29"),r.a.createElement("option",{value:"30"},"30"),r.a.createElement("option",{value:"31"},"31"))),r.a.createElement(_.a,{fullWidth:!0,color:"primary","aria-label":"full width outlined button group"},r.a.createElement(N.a,{variant:"contained",color:"secondary",onClick:function(e){return t.handleProcesar()}},"Procesar Reporte"),r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:function(e){return t.imprimir()}},"Exportar Excel"))))))}}]),a}(r.a.Component),$=a(91),X=a.n($),H=a(92),Y=a.n(H),q=a(90),J=a.n(q),Z=a(89),Q=a.n(Z),ee=a(74),te=a.n(ee);a(109);if(!M.a.apps.length)try{M.a.initializeApp({apiKey:"AIzaSyAV1RFAEI358lpXv_7d81xb0KdRo4f-TEk",authDomain:"tienda-aa5d3.firebaseapp.com",databaseURL:"https://tienda-aa5d3.firebaseio.com",projectId:"tienda-aa5d3",storageBucket:"tienda-aa5d3.appspot.com",messagingSenderId:"898170837567",appId:"1:898170837567:web:346072753502ad054cf68a",measurementId:"G-WX90RTSG4S"})}catch(ge){console.log(ge)}var ae=M.a.database(),ne=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),re=(Object(f.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"}}})),function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleTarjeta=function(e){n.setState({showMetodoPago:!1,inputSell:"",showFolio:!0})},n.handleClose=function(e){n.setState({show:!1,inputSell:""})},n.handleCloseFolio=function(e){n.setState({showFolio:!1,inputSell:"",folio:""}),console.log(n.state.folio)},n.handleClosePass=function(e){n.setState({showPass:!1,inputSell:""}),console.log(n.state.folio)},n.handleCloseMetodoPago=function(e){n.setState({showMetodoPago:!1})},n.handleNuevo=function(e){n.setState({show:!1,inputSell:""}),console.log("AGREGAR A INVENTARIO")},n._onChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(h.a)({},a,r))},n.state={productos:[],brand:"Ford",model:"Mustang",color:"red",year:1964,enventa:[],inputSell:"",inventario:[],productoAgregar:"",show:!1,folios:"",disabled:!1,autofocus:!0,adding:!0,suma:0,showMetodoPago:!1,showFolio:!1,name:"",folio:"",ventasDiarias:[],dia:"",mes:"",anio:"",visualizacion:1,totalTarjeta:0,totalEfectivo:0,totalProducto:0,totalConsultas:0,totalProcedimientos:0,totalMedicamentos:0,sumaTotal:0,showPass:!1,password:"",idBorrar:"",revBorrar:"",errorPass:!1,helperPass:""},n._onKeyPress=n._onKeyPress.bind(Object(g.a)(n)),n._onChange=n._onChange.bind(Object(g.a)(n)),n.getAllenventa=n.getAllenventa.bind(Object(g.a)(n)),n.getAllVentasDiarias=n.getAllVentasDiarias.bind(Object(g.a)(n)),n.handleClose=n.handleClose.bind(Object(g.a)(n)),n.handleNuevo=n.handleNuevo.bind(Object(g.a)(n)),n.handleShow=n.handleShow.bind(Object(g.a)(n)),n.handleDel=n.handleDel.bind(Object(g.a)(n)),n.agregarVenta=n.agregarVenta.bind(Object(g.a)(n)),n.pagar=n.pagar.bind(Object(g.a)(n)),n.handleCloseMetodoPago=n.handleCloseMetodoPago.bind(Object(g.a)(n)),n.handleEfectivo=n.handleEfectivo.bind(Object(g.a)(n)),n.handleTarjeta=n.handleTarjeta.bind(Object(g.a)(n)),n.handleAceptarFolio=n.handleAceptarFolio.bind(Object(g.a)(n)),n.handleCloseFolio=n.handleCloseFolio.bind(Object(g.a)(n)),n.previousDay=n.previousDay.bind(Object(g.a)(n)),n.nextDay=n.nextDay.bind(Object(g.a)(n)),n.borrarVenta=n.borrarVenta.bind(Object(g.a)(n)),n.handleClosePass=n.handleClosePass.bind(Object(g.a)(n)),n.handleAceptarCont=n.handleAceptarCont.bind(Object(g.a)(n)),n.imprimir=n.imprimir.bind(Object(g.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n,r,o,i,l=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a=t.getFullYear(),n=t.getMonth()+1,r=n<10?"0"+n.toString():n,o=t.getDate(),i=o<10?"0"+o.toString():o,e.next=8,this.setState({dia:i,mes:r,anio:a});case 8:ae.ref().child("INVENTARIO").on("value",(function(e){if(null==e.val())l.setState({inventario:[]});else{var t=e.val(),a=Object.values(t);console.log(a),l.setState({inventario:a})}})),this.getAllVentasDiarias(),this.getAllenventa();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"borrarVenta",value:function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showPass:!0,idBorrar:t}),console.log(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"imprimir",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n,r,o,i,l,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.ventasDiarias,n=[],e.next=4,a.map((function(e){e._id===t&&(n=e)}));case 4:return r=te()({orientation:"l",unit:"mm",format:[297.64,420.945],putOnlyUsedFonts:!0,floatPrecision:16}),o=r.internal.pageSize.width||r.internal.pageSize.getWidth(),r.setFont("Time New Roman"),r.setFontSize(10),r.text("Dra. Elena Mart\xednez Guerra",o/2,12,"center"),r.text("Especialidades Dermatol\xf3gicas",o/2,16,"center"),r.setLineWidth(.5),r.line(8,20,140,20),i=n.venta[0].prod,l=[],30,c=0,e.next=18,i.map((function(e){c+=parseFloat(e.precio);var t=[e.producto,e.cantidad,e.tipoProducto,"$"+parseFloat(e.precio).toFixed(2)];return l.push(Object.assign({},t)),10,l}));case 18:l.push(Object.assign({},["","","TOTAL","$"+parseFloat(c).toFixed(2)])),r.autoTable({head:[["Nombre","Cantidad","Tipo","Precio"]],startY:22,body:l,theme:"grid",styles:{fontSize:6,halign:"center",cellPadding:1}}),console.log(r.internal.pageSize.getHeight()),r.setFontSize(10),r.text("Firma Recibido",o/2,98,"center"),r.line(8,100,140,100),r.autoPrint({variant:"non-conform"}),r.save(t+".pdf");case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nextDay",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(this.state.dia),a=parseInt(this.state.mes),n=this.state.anio,console.log(t),31===t?(t=1,12===a?(n+=1,a=1):a+=1):t+=1,o=a<10?"0"+a.toString():a,r=t<10?"0"+t.toString():t,console.log("MODIFICADO"),console.log(r),console.log(o),console.log(n),e.next=13,this.setState({dia:r,mes:o,anio:n});case 13:this.getAllVentasDiarias();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"previousDay",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(this.state.dia),a=parseInt(this.state.mes),n=this.state.anio,console.log(t),1===t?(t=31,1===a?(n-=1,a=12):a-=1):t-=1,o=a<10?"0"+a.toString():a,r=t<10?"0"+t.toString():t,console.log("MODIFICADO"),console.log(r),console.log(o),console.log(n),e.next=13,this.setState({dia:r,mes:o,anio:n});case 13:this.getAllVentasDiarias();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllVentasDiarias",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a=ae.ref().child("VENTAS"),e.next=4,a.on("value",(function(e){var t=n.state.mes,a=n.state.dia,r=n.state.anio.toString()+"-"+t+"-"+a,o=[],i=[],l=e.val();i=Object.values(l),console.log(i),console.log(i),i.map((function(e){e._id.substring(0,10)===r?(console.log("ES IGUAL"),o.push(e),console.log(o)):console.log("NO ES IGUAL")}));var c=0,s=0,d=0,u=0,p=0,m=0,h=0;o.map((function(e){c+=parseFloat(e.venta[0].total),d+=parseFloat(e.venta[0].tipoPago.efectivo),s+=parseFloat(e.venta[0].tipoPago.tarjeta.monto),e.venta[0].prod.map((function(e){"Procedimiento"===e.tipoProducto&&(m+=1),"Consulta"===e.tipoProducto&&(p+=1),"Medicamento"===e.tipoProducto&&(h+=1)})),u=p+m+h})),n.setState({totalTarjeta:s,totalEfectivo:d,totalProducto:u,totalConsultas:p,totalProcedimientos:m,totalMedicamentos:h,sumaTotal:c,ventasDiarias:o}),console.log(n.state.totalTarjeta)}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllenventa",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ae.ref().child("enVenta").on("value",(function(e){if(null==e.val())t.setState({suma:0,enventa:[],disabled:!1,autofocus:!0});else{var a=e.val(),n=Object.values(a),r=0;n.map((function(e){r+=parseFloat(e.precio)})),console.log("ESTE "),t.setState({suma:r.toFixed(2),enventa:n.reverse(),disabled:!1,autofocus:!0})}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"pagar",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showMetodoPago:!0});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEfectivo",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n,r,o,i,l,c,s,d,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showMetodoPago:!1,inputSell:""}),t=this.state.suma,a=new Date,n=a.getFullYear(),r=a.getMonth()+1,console.log(r),o=r<10?"0"+r.toString():r,i=a.getDate(),l=i<10?"0"+i.toString():i,c=this.state.enventa,s=n.toString()+"-"+o+"-"+l,d=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8),u={_id:s+"-"+d,anio:n,mes:o,dia:l,total:0,venta:[{total:t,folio:d,tipoPago:{efectivo:t,tarjeta:{monto:0,folio:"AAA"}},prod:c}]},ae.ref().child("VENTAS").child(u._id).set(u),ae.ref().child("enVenta").remove();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleAceptarCont",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"12345"===this.state.password?(ae.ref().child("VENTAS").child(this.state.idBorrar).remove(),this.setState({showPass:!1,password:""}),this.getAllVentasDiarias()):(this.setState({errorPass:!0,helperPass:"CONTRASE\xd1A EQUIVOCADA"}),this.getAllVentasDiarias());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"agregarVenta",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({adding:!1}),!1!==this.state.adding){e.next=5;break}console.log("Agregando esperar"),e.next=15;break;case 5:return console.log(this.state.adding),(a=t).cantidad=a.cantidad-1,n={_id:(new Date).toISOString().split(".").join(""),idInv:t.id,producto:t.nombre,codigo:t.id,cantidad:1,tipoProducto:t.tipoProducto,precio:t.precio,cerrado:!1},r=n._id,e.next=12,ae.ref().child("enVenta").child(r).set(n);case 12:return e.next=14,ae.ref().child("INVENTARIO").child(t.id).set(t);case 14:this.setState({adding:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleAceptarFolio",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n,r,o,i,l,c,s,d,u,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showFolio:!1,inputSell:""}),t=this.state.suma,a=this.state.folio,n=new Date,r=n.getFullYear(),o=n.getMonth()+1,i=o<10?"0"+o.toString():o,l=n.getDate(),c=l<10?"0"+l.toString():l,s=this.state.enventa,d=r.toString()+"-"+i+"-"+c,console.log(Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8)),u=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8),m={_id:d+"-"+u,anio:r,mes:i,dia:c,total:0,venta:[{total:t,folio:u,tipoPago:{efectivo:0,tarjeta:{monto:t,folio:a}},prod:s}]},ae.ref().child("VENTAS").child(m._id).set(m),ae.ref().child("enVenta").remove();case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleDel",value:function(){var e=Object(m.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ae.ref().child("enVenta").child(a._id).remove(),ae.ref().child("INVENTARIO").child(a.idInv).once("value",(function(e){var t=e.val().cantidad+1;ae.ref().child("INVENTARIO").child(a.idInv).update({cantidad:t})}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"_onKeyPress",value:function(e){if(13===e.charCode){for(var t=this.state.inventario,a=this.state.inputSell,n=!1,r="",o=0;o<t.length;o++)t[o].id===a&&(r=t[o],n=!0);n?r.cantidad<=0?(this.handleShow(),console.log("NO TIENE PRODUCTO EN INVENTARIO")):this.agregarVenta(r):console.log("NO EXISTE"),this.setState({inputSell:""}),this.componentDidMount()}}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{container:!0,style:{backgroundColor:"#dddddd"}},r.a.createElement(v.a,{item:!0,xs:1,style:{backgroundColor:"#dddddd"}}),r.a.createElement(v.a,{item:!0,xs:6},r.a.createElement(v.a,{style:{backgroundColor:"#dddddd",height:"100%"}},r.a.createElement(C.a,{fullWidth:!0,noValidate:!0,autoComplete:"off"},r.a.createElement(E.a,{autoFocus:this.state.autofocus,name:"inputSell",onChange:this._onChange,onKeyPress:this._onKeyPress,id:"outlined-basic",disabled:!1,variant:"outlined",value:this.state.inputSell,style:{width:"100%",marginTop:"50px"}}),r.a.createElement(b.a,null,r.a.createElement(A.a,{style:{overflow:"auto",height:"55vh",marginTop:"30px"}},r.a.createElement("div",null,r.a.createElement(y.a,{stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(k.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{align:"right"},"#"),r.a.createElement(P.a,{align:"right"},"Cantidad"),r.a.createElement(P.a,{align:"right"},"Producto"),r.a.createElement(P.a,{align:"right"},"Precio"),r.a.createElement(P.a,{align:"right"},"Total"),r.a.createElement(P.a,{align:"right"},"Cancelar"))),r.a.createElement(S.a,null,this.state.enventa.map((function(t,a,n){return r.a.createElement(x.a,{key:a},r.a.createElement(P.a,{align:"right"},a+1),r.a.createElement(P.a,{align:"right"},t.cantidad),r.a.createElement(P.a,{align:"right"},t.producto,r.a.createElement("br",null)),r.a.createElement(P.a,{align:"right"},"$",t.precio),r.a.createElement(P.a,{align:"right"},"$",t.precio*t.cantidad),r.a.createElement(P.a,{align:"right"},r.a.createElement("button",{onClick:function(a){e.handleDel(a,t)}},"Eiminar")))})))))))))),r.a.createElement(v.a,{item:!0,xs:1,style:{backgroundColor:"#dddddd",height:"100vh"}}),r.a.createElement(v.a,{item:!0,xs:4},r.a.createElement(v.a,{style:{backgroundColor:"#888888",height:"100%"}},r.a.createElement(v.a,{style:{display:"flex",justifyContent:"flex-end",flexDirection:"column",textAlign:"center",left:"50%",height:"20%",backgroundColor:"#ffffff"}},r.a.createElement(z.a,{variant:"h3"}," TOTAL"),r.a.createElement(z.a,{variant:"h3"},ne.format(this.state.suma)),r.a.createElement(_.a,{fullWidth:!0,color:"primary","aria-label":"full width outlined button group"},r.a.createElement(N.a,{variant:"contained",color:"secondary",onClick:function(t){e.pagar()}},"Pagar"))),r.a.createElement(A.a,{style:{textAlign:"center",marginBotton:"auto",marginTop:"10px",marginRight:"auto",marginLeft:"auto"}},r.a.createElement(z.a,null,r.a.createElement(Q.a,{onClick:function(t){return e.previousDay()}}),this.state.dia,"/",this.state.mes,"/",this.state.anio,r.a.createElement(J.a,{onClick:function(t){return e.nextDay()}}))),r.a.createElement(v.a,{container:!0,style:{height:"50%",backgroundColor:"#888888"}},r.a.createElement(v.a,{container:!0,style:{height:"80%",backgroundColor:"#888888"}},r.a.createElement(A.a,{style:{width:"90%",height:"250px",marginRight:"auto",marginLeft:"auto",overflow:"auto",marginTop:"30px"}},r.a.createElement("div",null,r.a.createElement(y.a,{padding:"none",stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(k.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{align:"center"},"#"),r.a.createElement(P.a,{align:"center"},"Folio"),r.a.createElement(P.a,{align:"center"},"Productos "),r.a.createElement(P.a,{align:"center"},"Efectivo"),r.a.createElement(P.a,{align:"center"},"Tarjeta"),r.a.createElement(P.a,{align:"center"},"Total"),r.a.createElement(P.a,{align:"center"},"Imp"),r.a.createElement(P.a,{align:"center"},"Eliminar"))),r.a.createElement(S.a,null,this.state.ventasDiarias.map((function(t,a,n){return r.a.createElement(x.a,{key:a},r.a.createElement(P.a,{align:"center"},a+1),r.a.createElement(P.a,{align:"center"},t.venta[0].folio),r.a.createElement(P.a,{align:"center"},t.venta[0].prod.length,r.a.createElement("br",null)),r.a.createElement(P.a,{align:"center"},"$",t.venta[0].tipoPago.efectivo),r.a.createElement(P.a,{align:"center"},"$",t.venta[0].tipoPago.tarjeta.monto),r.a.createElement(P.a,{align:"center"},"$",t.venta[0].total),r.a.createElement(P.a,{align:"center"},r.a.createElement(X.a,{onClick:function(a){e.imprimir(t._id)}})),r.a.createElement(P.a,{align:"center"},r.a.createElement(Y.a,{onClick:function(a){e.borrarVenta(t._id)}})))})))))),r.a.createElement(v.a,{container:!0,style:{backgroundColor:"#888888"}},r.a.createElement(A.a,{style:{marginRight:"auto",marginLeft:"auto",overflow:"auto",width:"90%",marginTop:"5px"}},r.a.createElement("p",null,"Efectivo $",this.state.totalEfectivo,"   Tarjeta $",this.state.totalTarjeta),r.a.createElement("p",null,"Total Venta del D\xeda $",this.state.sumaTotal," "),r.a.createElement("p",null,"Medicamentos ",this.state.totalMedicamentos,"  Consultas ",this.state.totalConsultas,"  Procedimiento ",this.state.totalProcedimientos),r.a.createElement("p",null,"Total de Productos: ",this.state.totalProducto))))))),r.a.createElement(j.a,{open:this.state.show,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(F.a,{id:"alert-dialog-title"},"No hay disponible en inventario"),r.a.createElement(D.a,null,r.a.createElement(I.a,{id:"alert-dialog-description"},"\xbfDesea agregar 1 producto de este art\xedculo al inventario?")),r.a.createElement(T.a,null,r.a.createElement(N.a,{onClick:this.handleNuevo,color:"primary"},"Si"),r.a.createElement(N.a,{onClick:this.handleClose,color:"primary",autoFocus:!0},"No"))),r.a.createElement(j.a,{open:this.state.showMetodoPago,onClose:this.handleCloseMetodoPago,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(F.a,{id:"alert-dialog-title"},"Seleccione el Tipo de Pago"),r.a.createElement(D.a,null,r.a.createElement(I.a,{id:"alert-dialog-description"},"\xbfTipo de Pago?")),r.a.createElement(T.a,null,r.a.createElement(N.a,{onClick:this.handleEfectivo,color:"primary"},"Efectivo"),r.a.createElement(N.a,{onClick:this.handleTarjeta,color:"primary",autoFocus:!0},"Tarjeta"),r.a.createElement(N.a,{onClick:this.handleCloseMetodoPago,color:"primary",autoFocus:!0},"Cancelar"))),r.a.createElement(j.a,{open:this.state.showFolio,onClose:this.handleCloseFolio,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(F.a,{id:"alert-dialog-title"},"Escriba Folio de Boucher de Venta"),r.a.createElement(D.a,null,r.a.createElement(E.a,{error:this.state.errorProducto,helperText:this.state.helperProducto,disabled:this.state.edit,label:"Folio de Ticket",name:"folio",onChange:this._onChange,variant:"outlined",value:this.state.folio,style:{width:"90%",marginTop:"50px"}})),r.a.createElement(T.a,null,r.a.createElement(N.a,{onClick:this.handleAceptarFolio,color:"primary",autoFocus:!0},"Aceptar"),r.a.createElement(N.a,{onClick:this.handleCloseFolio,color:"primary",autoFocus:!0},"Cancelar"))),r.a.createElement(j.a,{open:this.state.showPass,onClose:this.handleClosePass,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(F.a,{id:"alert-dialog-title"},"Escriba Contrase\xf1a para Borrar Venta"),r.a.createElement(D.a,null,r.a.createElement(E.a,{error:this.state.errorPass,helperText:this.state.helperPass,type:"password",label:"Contrase\xf1a",name:"password",onChange:this._onChange,variant:"outlined",value:this.state.password,style:{width:"90%",marginTop:"50px"}})),r.a.createElement(T.a,null,r.a.createElement(N.a,{onClick:this.handleAceptarCont,color:"primary",autoFocus:!0},"Aceptar"),r.a.createElement(N.a,{onClick:this.handleClosePass,color:"primary",autoFocus:!0},"Cancelar"))))}}]),a}(r.a.Component)),oe=a(140).default,ie=new oe("http://localhost:5984/inventario"),le=new oe("http://localhost:5984/ventas"),ce=new oe("http://localhost:5984/config"),se=function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._onChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(h.a)({},a,r))},n.state={inventario:[],ventas:[],config:[],seleccion:"",passAnterior:"",passNuevo:"",passConfirmar:"",helperPass:"",errorPass:!1,helperNuevoPass:"",errorNuevoPAss:!1,helperConfirmar:"",errorConfirmar:!1,procesado:[]},n._onChange=n._onChange.bind(Object(g.a)(n)),n.getAllinventario=n.getAllinventario.bind(Object(g.a)(n)),n.getAllVentas=n.getAllVentas.bind(Object(g.a)(n)),n.getAllConfig=n.getAllConfig.bind(Object(g.a)(n)),n.password=n.password.bind(Object(g.a)(n)),n.corregirDias=n.corregirDias.bind(Object(g.a)(n)),n.cambiarPAssword=n.cambiarPAssword.bind(Object(g.a)(n)),n.actualizarTabla=n.actualizarTabla.bind(Object(g.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllinventario().then((function(e){var a=Object.values(e);t.setState({inventario:a})}));case 2:return e.next=4,this.getAllVentas().then((function(e){var a=Object.values(e);t.setState({ventas:a})}));case 4:return e.next=6,this.getAllConfig().then((function(e){var a=Object.values(e);if(t.setState({config:a}),0===t.state.config.length){ce.put({_id:"Password",eliminar:"clinica826"},(function(e,t){e||console.log("Successfully added new date with sale!")})),console.log("ESTA VACIO EL CONFIG")}}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllVentas",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.allDocs({include_docs:!0});case 2:return t=e.sent,a={},t.rows.forEach((function(e){return a[e.id]=e.doc})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllinventario",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.allDocs({include_docs:!0});case 2:return t=e.sent,a={},t.rows.forEach((function(e){return a[e.id]=e.doc})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllConfig",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.allDocs({include_docs:!0});case 2:return t=e.sent,a={},t.rows.forEach((function(e){return a[e.id]=e.doc})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"password",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.state.config),this.setState({seleccion:"password"});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"corregirDias",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.setState({seleccion:"corregirDias"}),a=this.state.ventas,n=[],e.next=6,a.map((function(e){"undefined"===e._id.substring(8,17)&&n.push(e)}));case 6:return e.next=8,n.map((function(e){var a=e._id.substring(0,8)+e.venta[0].prod[0]._id.substring(8,10)+e._id.substring(17,25),n={_id:a,anio:e.anio,mes:e.mes,dia:e.venta[0].prod[0]._id.substring(8,10),total:e.total,venta:e.venta};return le.put(n,(function(n,r){if(n){var o={_id:e._id,anio:e.anio,mes:e.mes,dia:"",diaCorregido:e.venta[0].prod[0]._id.substring(8,10),idCorregido:a,status:"Anteriormente Corregido"};t.push(Object.assign({},o))}else{var i={_id:e._id,anio:e.anio,mes:e.mes,dia:"",diaCorregido:e.venta[0].prod[0]._id.substring(8,10),idCorregido:a,status:"CORREGIDO"};t.push(Object.assign({},i))}})),0}));case 8:this.actualizarTabla(t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"actualizarTabla",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cambiarPAssword",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.config,a="",t.map((function(e){return"Password"===e._id&&(a=e),0})),console.log(a),this.state.passAnterior==a.eliminar){e.next=8;break}this.setState({helperPass:"Contrase\xf1a Incorrecta",errorPass:!0}),e.next=15;break;case 8:if(this.state.passNuevo==this.state.passConfirmar){e.next=12;break}this.setState({helperPass:"",errorPass:!1,helperConfirmar:"No coinciden contrase\xf1as",errorConfirmar:!0,errorNuevoPAss:!0}),e.next=15;break;case 12:return a.eliminar=this.state.passNuevo,e.next=15,ce.put(a);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("p",null,"Inicio"),a="";return""===this.state.seleccion?t=r.a.createElement("p",null,"INICIADA LA PAGINA"):"password"===this.state.seleccion?(a=r.a.createElement("p",{style:{textAlign:"center"}},"  Cambiar Contrase\xf1a"),t=r.a.createElement(C.a,{fullWidth:!0,noValidate:!0,autoComplete:"off"},r.a.createElement(E.a,{InputLabelProps:{shrink:!0},placeholder:"Teclea Contrase\xf1a Actual",name:"passAnterior",onChange:this._onChange,id:"outlined-basic",variant:"outlined",value:this.state.passAnterior,style:{width:"90%",marginTop:"10px",marginLeft:"20px"},label:"Password Anterior",size:"small",helperText:this.state.helperPass,error:this.state.helperPass,type:"password"}),r.a.createElement(E.a,{InputLabelProps:{shrink:!0},placeholder:"Introduce Nueva Contrase\xf1a",name:"passNuevo",onChange:this._onChange,id:"outlined-basic",variant:"outlined",value:this.state.passNuevo,style:{width:"90%",marginTop:"40px",marginLeft:"20px"},label:"Password Nuevo",size:"small",helperText:this.state.helperNuevoPass,error:this.state.errorNuevoPAss,type:"password"}),r.a.createElement(E.a,{InputLabelProps:{shrink:!0},placeholder:"Confirma Nueva Contrase\xf1a",name:"passConfirmar",onChange:this._onChange,id:"outlined-basic",variant:"outlined",value:this.state.passConfirmar,style:{width:"90%",marginTop:"20px",marginLeft:"20px",marginBottom:"20px"},label:"Confirmar Nuevo Password",size:"small",helperText:this.state.helperConfirmar,error:this.state.errorConfirmar,type:"password"}),r.a.createElement(_.a,{orientation:"vertical",size:"large",color:"primary","aria-label":"large outlined primary button group",fullWidth:!0},r.a.createElement(N.a,{style:{marginTop:"5px"},variant:"contained",color:"primary",onClick:function(t){return e.cambiarPAssword()}},"Cambiar Contrase\xf1a")))):"corregirDias"==this.state.seleccion&&(t=r.a.createElement(A.a,{style:{width:"90%",height:"250px",marginRight:"auto",marginLeft:"auto",overflow:"auto",marginTop:"30px"}},r.a.createElement("div",null,r.a.createElement(y.a,{padding:"none",stickyHeader:!0,"aria-label":"sticky table"},r.a.createElement(k.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,{align:"center"},"#"),r.a.createElement(P.a,{align:"center"},"ID ORIGINAL"),r.a.createElement(P.a,{align:"center"},"A\xf1o "),r.a.createElement(P.a,{align:"center"},"Mes"),r.a.createElement(P.a,{align:"center"},"Dia"),r.a.createElement(P.a,{align:"center"},"ID CORREGIDO"),r.a.createElement(P.a,{align:"center"},"ID CORREGIDO"),r.a.createElement(P.a,{align:"center"},"Status"))),r.a.createElement(S.a,null,this.state.procesado.map((function(e,t,a){return console.log(e),r.a.createElement(x.a,{key:t},r.a.createElement(P.a,{align:"center"},t+1),r.a.createElement(P.a,{align:"center"},e._id),r.a.createElement(P.a,{align:"center"},e.anio,r.a.createElement("br",null)),r.a.createElement(P.a,{align:"center"},e.mes),r.a.createElement(P.a,{align:"center"},e.dia),r.a.createElement(P.a,{align:"center"},e.diaCorregido),r.a.createElement(P.a,{align:"center"},e.status))}))))))),r.a.createElement(v.a,{container:!0,style:{backgroundColor:"#dddddd"}},r.a.createElement(v.a,{item:!0,xs:1,style:{backgroundColor:"#dddddd"}}),r.a.createElement(v.a,{item:!0,xs:8},r.a.createElement(v.a,{style:{backgroundColor:"#dddddd",height:"100%"}},r.a.createElement(v.a,{style:{fontStyle:"",backgroundColor:"#ffffff",width:"50%"}},a,t))),r.a.createElement(v.a,{item:!0,xs:1,style:{backgroundColor:"#dddddd",height:"100vh"}}),r.a.createElement(v.a,{item:!0,xs:2,style:{backgroundColor:"#FFFFFF"}},r.a.createElement(_.a,{orientation:"vertical",size:"large",color:"primary","aria-label":"large outlined primary button group",fullWidth:!0},r.a.createElement(N.a,{style:{marginTop:"5px"},variant:"contained",color:"primary",onClick:function(t){return e.password()}},"Contrase\xf1a"),r.a.createElement(N.a,{style:{marginTop:"5px"},variant:"contained",color:"primary",onClick:function(t){return e.corregirDias()}},"Corregir Dias"))))}}]),a}(r.a.Component),de=(a(143),{fontSize:"30px",height:"80px"}),ue=function(){return r.a.createElement("div",{className:"top botones"},r.a.createElement(v.a,{item:!0,xs:12,md:12},r.a.createElement(_.a,{fullWidth:!0,color:"primary","aria-label":"full width outlined button group"},r.a.createElement(N.a,{style:de,onClick:function(e){return window.location.href="#venta"}},"Venta"),r.a.createElement(N.a,{style:de,onClick:function(e){return window.location.href="#inventario"}},"Inventario"),r.a.createElement(N.a,{style:de,onClick:function(e){return window.location.href="#reportes"}},"Reportes"),r.a.createElement(N.a,{style:de,onClick:function(e){return window.location.href="#configuracion"}},"Configuracion"))))},pe=a(114),me=a(46),he=(a(144),function(e){Object(d.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={productos:"OK DENTRO"},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(pe.a,null,r.a.createElement(me.c,null,r.a.createElement(me.a,{path:"/venta",exact:!0,component:re}),r.a.createElement(me.a,{path:"/inventario",exact:!0,component:L}),r.a.createElement(me.a,{path:"/reportes",exact:!0,component:B}),r.a.createElement(me.a,{path:"/configuracion",exact:!0,component:se}),r.a.createElement(me.a,{path:"/test",exact:!0,component:re}),r.a.createElement(me.a,{path:"/",component:re})),r.a.createElement(ue,null))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,a){}},[[126,1,2]]]);
//# sourceMappingURL=main.56c169b6.chunk.js.map